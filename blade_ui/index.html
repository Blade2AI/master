<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Blade Boardroom Shell</title>
  <style>
    body { margin:0; font-family: system-ui; background:#000; color:#00ff88; }
    header { padding:8px 16px; background:#061a06; border-bottom:1px solid #0f3c0f; }
    #panels { display:flex; height: calc(100vh - 48px); }
    .panel { flex:1; padding:12px; overflow:auto; border-right:1px solid #092809; }
    .panel:last-child { border-right:none; }
    h2 { margin-top:0; font-size:14px; letter-spacing:2px; }
    pre { background:#081808; padding:8px; font-size:12px; }
    button { background:#000; color:#00ff88; border:1px solid #00ff88; padding:4px 10px; margin:4px 0; cursor:pointer; }
    button:hover { background:#042; }
  </style>
</head>
<body>
  <header>
    <strong>Blade Boardroom – Phase 3 Shell</strong> <span id="status"></span>
  </header>
  <div id="panels">
    <div class="panel" id="left">
      <h2>VECTOR RADAR</h2>
      <div id="vector"></div>
      <button onclick="refreshAgency()">Refresh Agency</button>
    </div>
    <div class="panel" id="center">
      <h2>TIMELINE / STATE</h2>
      <div id="timeline">(timeline placeholder)</div>
      <button onclick="queryTruthWindow()">Query Truth About Window</button>
      <pre id="truthAnswer"></pre>
    </div>
    <div class="panel" id="right">
      <h2>COMMAND TERMINAL</h2>
      <input id="cmdInput" placeholder="RAG 'question' | AGENCY 'text' | CHECK SOVEREIGN" style="width:100%;background:#000;color:#00ff88;border:1px solid #00ff88;padding:4px;" />
      <button onclick="runCommand()">Run</button>
      <pre id="cmdOut"></pre>
    </div>
  </div>
<script>
async function refreshAgency(){
  const vec = await window.BladeAPI.evalAgency({});
  document.getElementById('vector').textContent = JSON.stringify(vec,null,2);
}
async function queryTruthWindow(){
  const res = await window.BladeAPI.queryTruth('Summarise current operational posture');
  document.getElementById('truthAnswer').textContent = JSON.stringify(res,null,2);
}
async function runCommand(){
  const raw = document.getElementById('cmdInput').value.trim();
  if(raw.toUpperCase().startsWith('CHECK SOVEREIGN')){
    const s = await window.BladeAPI.getSovereignStatus();
    document.getElementById('cmdOut').textContent = JSON.stringify(s,null,2);
    return;
  }
  if(raw.toUpperCase().startsWith('RAG ')){
    const q = raw.substring(4).replace(/^"|"$/g,'');
    const r = await window.BladeAPI.queryTruth(q);
    document.getElementById('cmdOut').textContent = JSON.stringify(r,null,2);
    return;
  }
  if(raw.toUpperCase().startsWith('AGENCY ')){
    const t = raw.substring(7);
    const a = await window.BladeAPI.evalAgency({text:t});
    document.getElementById('cmdOut').textContent = JSON.stringify(a,null,2);
    return;
  }
  document.getElementById('cmdOut').textContent = 'Unknown command';
}
refreshAgency();
</script>
</body>
</html>
